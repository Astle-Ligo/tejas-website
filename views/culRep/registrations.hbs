<section class="py-20 px-6 bg-beige text-bistre font-handwritten">
    <div class="container mx-auto max-w-5xl bg-white p-8 shadow-lg rounded-lg">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-3xl font-bold text-coffee font-handwritten">
                Your Registered Events
            </h2>
            {{!-- <button onclick="shareEvents()"
                class="ml-auto px-4 py-2 bg-coffee text-beige rounded-lg hover:bg-bistre transition font-handwritten shadow-md">
                ðŸ“¢ Share with Class
            </button> --}}
        </div>
        {{!-- Individual Events --}}
        {{#if (some registrations "type" "individual")}}
        <h3 class="text-2xl font-semibold text-coffee mb-4 font-handwritten">Individual Events</h3>
        <div class="overflow-x-auto mb-8">
            <table class="w-full border border-khaki text-left font-handwritten">
                <thead class="bg-coffee text-beige">
                    <tr>
                        <th class="p-3 border-b whitespace-nowrap w-12 font-handwritten">#</th>
                        <th class="p-3 border-b min-w-[150px] font-handwritten">Event Name</th>
                        <th class="p-3 border-b min-w-[120px] font-handwritten">Date</th>
                        <th class="p-3 border-b min-w-[150px] font-handwritten">Participant Name</th>
                        <th class="p-3 border-b min-w-[130px] font-handwritten">Registration Number</th>
                        <th class="p-3 border-b min-w-[140px] font-handwritten">Phone Number</th>
                      <th class="p-3 border-b min-w-[100px] font-handwritten">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each registrations}}
                    {{#if (eq this.type "individual")}}
                    <tr class="border-b font-handwritten">
                        <td class="p-3 text-center whitespace-nowrap">{{inc @index}}</td>
                        <td class="p-3 whitespace-nowrap">
                            <span class="block font-semibold">{{this.eventDetails.eventName}}</span>
                            <span class="block text-sm text-gray-600">{{this.eventDetails.eventSubName}}</span>
                        </td>
                        <td class="p-3 whitespace-nowrap">{{this.eventDetails.eventDate}}</td>
                        <td class="p-3 whitespace-nowrap">{{this.participant.name}}</td>
                        <td class="p-3 whitespace-nowrap">{{this.participant.regNum}}</td>
                        <td class="p-3 whitespace-nowrap">{{this.participant.phone}}</td>
                        <td class="p-3">
                            <div class="flex flex-col items-center space-y-2">
                                <a href="/culRep/edit-registration/{{this._id}}"
                                    class="px-3 py-2 bg-coffee text-beige rounded-lg text-center w-full hover:bg-bistre transition font-handwritten">
                                    Edit
                                </a>
                                <a href="/culRep/delete-registration/{{this._id}}"
                                    class="px-3 py-2 bg-red-600 text-beige rounded-lg text-center w-full hover:bg-red-700 transition font-handwritten shadow-md"
                                    onclick="return confirm('Do you want to delete {{this.eventDetails.eventName}} registration?')">
                                    Delete
                                </a>
                            </div>
                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}
                </tbody>
            </table>
        </div>
        {{/if}}

        {{!-- Group Events --}}
        {{#if (some registrations "type" "group")}}
        <h3 class="text-2xl font-semibold text-coffee mb-4 font-handwritten">Group Events</h3>
        <div class="overflow-x-auto">
            <table class="w-full border border-khaki text-left font-handwritten">
                <thead class="bg-coffee text-beige">
                    <tr>
                        <th class="p-3 border-b whitespace-nowrap w-12 font-handwritten">#</th>
                        <th class="p-3 border-b min-w-[150px] font-handwritten">Event Name</th>
                        <th class="p-3 border-b min-w-[120px] font-handwritten">Date</th>
                        <th class="p-3 border-b min-w-[150px] font-handwritten">Team Name</th>
                        <th class="p-3 border-b min-w-[180px] font-handwritten">Participants</th>
                        <th class="p-3 border-b min-w-[130px] font-handwritten">Registration Numbers</th>
                        <th class="p-3 border-b min-w-[140px] font-handwritten">Phone Numbers</th>
                        <th class="p-3 border-b min-w-[100px] font-handwritten">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each registrations}}
                    {{#if (eq this.type "group")}}
                    <tr class="border-b font-handwritten">
                        <td class="p-3 text-center whitespace-nowrap">{{inc @index}}</td>
                        <td class="p-3 whitespace-nowrap">
                            <span class="block font-semibold">{{this.eventDetails.eventName}}</span>
                            <span class="block text-sm text-gray-600">{{this.eventDetails.eventSubName}}</span>
                        </td>
                        <td class="p-3 whitespace-nowrap">{{this.eventDetails.eventDate}}</td>
                        <td class="p-3 font-bold whitespace-nowrap">{{this.teamName}}</td>
                        <td class="p-3">
                            {{#each this.teamMembers}}
                            <span class="block whitespace-nowrap">{{this.name}}</span>
                            {{/each}}
                        </td>
                        <td class="p-3">
                            {{#each this.teamMembers}}
                            <span class="block whitespace-nowrap">{{this.regNum}}</span>
                            {{/each}}
                        </td>
                        <td class="p-3 whitespace-nowrap">
                            <span class="block text-sm">{{this.contact.teamPhone}}</span>
                            <span class="block text-sm">{{this.contact.altPhone}}</span>
                        </td>
                        <td class="p-3">
                            <div class="flex flex-col items-center space-y-2">
                                <a href="/culRep/edit-registration/{{this._id}}"
                                    class="px-3 py-2 bg-coffee text-beige rounded-lg text-center w-full hover:bg-bistre transition font-handwritten">
                                    Edit
                                </a>
                                <a href="/culRep/delete-registration/{{this._id}}"
                                    class="px-3 py-2 bg-red-600 text-beige rounded-lg text-center w-full hover:bg-red-700 transition font-handwritten shadow-md"
                                    onclick="return confirm('Do you want to delete {{this.eventDetails.eventName}} registration?')">
                                    Delete
                                </a>

                            </div>

                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}
                </tbody>
            </table>
        </div>
        {{/if}}

        {{!-- No registrations message --}}
        {{#unless registrations.length}}
        <p class="text-muted text-center font-handwritten">No events registered yet.</p>
        {{/unless}}

    </div>
</section>


{{!-- <script>
    document.getElementById("shareButton").addEventListener("click", function () {
        const shareText = "Check out the events I registered for: ";
        const shareURL = window.location.href;

        if (navigator.share) {
            navigator.share({
                title: "Event Registrations",
                text: shareText,
                url: shareURL
            }).catch(err => console.log("Sharing failed", err));
        } else {
            navigator.clipboard.writeText(shareText + shareURL);
            alert("Link copied to clipboard! Share it with your class.");
        }
    });
</script> --}}